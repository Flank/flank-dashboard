@startuml public_dashboard_auth_class_diagram

package base.domain.usecases {
    abstract class UseCase<Type, Params> {
        + call(Params params): Type
    }
}

package auth {
    package presentation {
        package view_models {
            class UserProfileViewModel {
                + isAnonymous: bool
            }
        }

        package models {
            enum AuthState {
                 loggedIn
                 loggedAnonymously
                 unauthenticated
            }
        }

        package state {
            class AuthNotifier {
                - _authState: AuthState
                + userProfileViewModel: UserProfileViewModel
                + signInAnonymously(): Future<void>
            }
        }
    }

    package domain {
        package repositories {
            class UserRepository {
                + signInAnonymously(): Future<void>
            }
        }

        package usecases {
            class SignInAnonymouslyUseCase<Future<void>, void> implements UseCase {
                - _repository: UserRepository
            }
        }
    }

    package data.repositories {
        class FirebaseUserRepository implements UserRepository {}
    }
}

SignInAnonymouslyUseCase --> UserRepository: uses
AuthNotifier --> SignInAnonymouslyUseCase: uses
AuthNotifier --> AuthState: uses
AuthNotifier --> UserProfileViewModel: provides
@enduml
