@startuml resync_single_build_activity_diagram
'https://plantuml.com/activity-diagram-beta

skinparam ConditionEndStyle hline

:source.fetchBuild() -> **sourceBuild**;
:**newBuild** = null]

if (failed to load **sourceBuild**) then (yes)
    #yellow:(1)
else (no)
    if (**sourceBuild** is still running) then (no)
        :process **build** with new data -> **newBuild**;
    else (yes)
        #yellow:(1)
        if (should force timeout) then (yes)
            :force time out **build** -> **newBuild**;
            note left
                controlled by CLI option
                //--in-progress-timeout//
                defaults to //120 minutes//
            end note
        else (no)
        endif
    endif
endif

:finish with the **newBuild**|

end

@enduml
